<!DOCTYPE html>
<html>
  <head>
    <title>aliernfrog</title>
    <meta name="og:title" content="aliernfrog"/>
    <meta name="og:description" content="Home page of aliernfrog website"/>
    <meta name="og:image" content="/assets/images/aliernfrog.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
  </head>
  <body style="background-color:black;">
    <div id="topbar" style="text-align:center;">
      <img src="/assets/images/aliernfrog.png" alt="aliernfrog" style="width:64px;height:64px;">
      <h1 id="header">aliernfrog</h1>
      <p1 id="description">Please wait..</p1>
    </div><br>

    <div id="highlights"></div><br>

    <div id="socials" style="text-align:center;"></div>
    
    <script>
      function onConfigLoaded() {
        getWelcomeMessage();
        getSocials(document.getElementById("socials"));
        loadProjects();
        loadDesign();
      }

      function getWelcomeMessage() {
        let view = document.getElementById("description");
        if (config.welcomeWarning) {
          view.innerHTML = config.welcomeWarning;
        } else {
          view.innerHTML = randomize(config.welcomeMessages);
        }
      }

      function loadDesign() {
        document.body.style.background = config.colorBody;
        document.body.style.fontFamily = config.font;
        setBgRounded(document.getElementById("topbar"), config.colorBgPrimary, false);
        document.getElementById("header").style.color = config.colorText;
        document.getElementById("description").style.color = config.colorText;
        setBgRounded(document.getElementById("highlights"), config.colorBgPrimary, false);
        document.getElementById("highlights").style.color = config.colorText;
        setBgRounded(document.getElementById("socials"), config.colorBgPrimary, false);
        setLinkColors(config.colorLink, []);
      }

      function loadProjects() {
        fetch("/assets/values/projects.json").then(async response => {
          const projects = await response.json();
          const highlights = [];
          for (i = 0; i < projects.length; i++) {
            const project = projects[i];
            const finalHtml = [
              `<a href="${project.url}" style="text-decoration:none;text-color:${config.colorText}">`,
              `<div id="${project.id}" style="color:${config.colorText};">`,
              `<div style="margin-bottom:8px;">`,
              `<img src="${project.icon}" style="width:40px;height:40px;vertical-align:middle;margin-right:8px;">`,
              `<p1 style="vertical-align:middle;"><font size="5px"><b>${project.name}</b></font></p1>`,
              `</div>`,
              `<p1 style="opacity:70%;">${project.description}</p1><br>`
            ];
            if (project.tags) {
              const tags = [];
              for (a = 0; a < project.tags.length; a++) {
                const tagId = project.tags[a];
                const tag = config.tags.find(t => t.id === tagId);
                tags.push([
                  `<div class="tag" id="${tag.id}" style="display:inline-block;vertical-align:middle;">`,
                  `<p1><font size="2px">${tag.emoji} ${tag.name}</font></p1>`,
                  `</div>`
                ].join(""));
              }
              finalHtml.push(tags.join(" "));
            }
            finalHtml.push(`</div></a>`);
            highlights.push(finalHtml.join(""));
          }
          document.getElementById("highlights").innerHTML = `<h2 style="text-align:center;">Highlights</h2>${highlights.join("")}`;
          setDivs(document.getElementById("highlights"));
          setTagDivs(document.getElementById("highlights"));
        });
      }

      function setDivs(parent) {
        const divs = parent.getElementsByTagName("div");
        for (i = 0; i < divs.length; i++) {
          const div = divs[i];
          if (div.id && div.className != "tag") setBgRounded(div, config.colorBgSecondary, true);
        }
      }

      function setTagDivs(parent) {
        const divs = parent.getElementsByClassName("tag");
        for (i = 0; i < divs.length; i++) {
          const div = divs[i];
          div.style.borderRadius = "25px";
          div.style.marginTop = "8px";
          div.style.padding = "3px 8px 3px 8px";
          div.style.backgroundColor = config.colorBgPrimary;
          div.style.opacity = "90%"
        }
      }
    </script>
    <script src="/assets/utils/GeneralUtil.js"></script>
  </body>
</html>